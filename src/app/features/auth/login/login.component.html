<mat-card appearance="outlined">
  <mat-card-header class="m-auto">
    <mat-card-title class="text-white">INICIAR SESIÓN</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <!-- Error Message -->
    
    <mat-divider class="my-3"> </mat-divider>
    <form class="my-3" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="my-2">
        <mat-form-field class="col-12">
          <mat-label>Ingrese su email</mat-label>
          <input matInput placeholder="" formControlName="email" />
          <mat-error appFontSize fontSize="10px"
            >El campo es requerido</mat-error
          >
        </mat-form-field>
      </div>
      <div class="my-2">
        <mat-form-field class="col-12">
          <mat-label>Ingrese su contraseña</mat-label>
          <input formControlName="password" matInput [type]="passwordType" />
          <button
            mat-icon-button
            matSuffix
            (click)="togglePassword()"
            type="button"
          >
            <mat-icon>{{ hideIcon }}</mat-icon>
          </button>
          <mat-error appFontSize fontSize="10px"
            >El campo es requerido</mat-error
          >
        </mat-form-field>
      </div>
      <div *ngIf="errorMessage()" class="error-message mb-3">
        <mat-icon class="error-icon">error_outline</mat-icon>
        <span class="ms-2">{{ errorMessage() }}</span>
      </div>
      <button mat-flat-button color="primary" class="w-100" type="submit" [disabled]="loading" [class.spinner]="loading">
        <span *ngIf="!loading">Iniciar sesión</span>
        <span *ngIf="loading" class="button-loading">
          <mat-spinner diameter="20" color="accent"></mat-spinner>
          <span class="ms-2">Iniciando sesión...</span>
        </span>
      </button>
    </form>
    
  </mat-card-content>
</mat-card>

<!-- Add some basic styles for the error message -->
<style>
  .error-message {
    background-color: #f8d7da;
    color: #721c24;
    padding: 10px 15px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    font-size: 14px;
  }
  
  .error-icon {
    font-size: 18px;
    width: 18px;
    height: 18px;
  }
  
  .button-loading {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .mat-mdc-progress-spinner {
    --mdc-circular-progress-active-indicator-color: white !important;
  }
</style>
