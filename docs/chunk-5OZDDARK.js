import{a as Q}from"./chunk-L7IEYTCS.js";import{a as L}from"./chunk-RM635RE6.js";import"./chunk-52GIBL2D.js";import{o as T}from"./chunk-HNE7D7Y7.js";import{I as U,a as P,b as V,d as H,e as J,f as K}from"./chunk-IIQQG7MX.js";import{Ba as k,Da as u,Fa as B,Ga as D,Ia as G,Ja as q,Ka as O,La as z,a as I,ca as w,da as N,ea as x,ha as E,k as F,m as h,ta as _,ua as j,wa as A,ya as R}from"./chunk-4SWAUFVP.js";import{Ib as g,Rb as e,Sb as r,Tb as d,_b as v,kb as p,lb as a,lc as n,ma as s,mc as M,md as C,vb as b,wa as y,xa as l}from"./chunk-PWY5XFB5.js";var c=class o{constructor(t,i,m,S){this.formBuilder=t;this.authService=i;this.router=m;this.store=S;this.loginForm=this.formBuilder.group({email:["",[u.required,u.email]],password:["",u.required]})}hideIcon="visibility_off";passwordType="password";errorMessage=b("");loginForm;ngOnInit(){this.deleteToken()}deleteToken(){localStorage.removeItem("token")}togglePassword(){this.hideIcon=this.hideIcon==="visibility"?"visibility_off":"visibility",this.passwordType=this.passwordType==="password"?"text":"password"}doLogin(){this.authService.login(this.loginForm.value).subscribe({next:t=>{this.router.navigate(["dashboard","home"])},error:t=>{console.error(t),t instanceof Error&&alert(t.message),t instanceof I&&t.status===0&&alert("No se pudo conectar con el servidor")}})}onSubmit(){this.loginForm.invalid?this.loginForm.markAllAsTouched():this.doLogin()}static \u0275fac=function(i){return new(i||o)(a(z),a(L),a(F),a(T))};static \u0275cmp=y({type:o,selectors:[["app-login"]],decls:26,vars:3,consts:[["appearance","outlined"],[1,"m-auto"],[1,"text-white"],[1,"my-3"],[1,"my-3",3,"ngSubmit","formGroup"],[1,"my-2"],[1,"col-12"],["matInput","","placeholder","","formControlName","email"],["appFontSize","","fontSize","10px"],["formControlName","password","matInput","",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-flat-button","","type","submit",1,"w-100"]],template:function(i,m){i&1&&(e(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title",2),n(3,"LOGIN"),r()(),e(4,"mat-card-content"),d(5,"mat-divider",3),e(6,"form",4),v("ngSubmit",function(){return m.onSubmit()}),e(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),n(10,"Enter your email"),r(),d(11,"input",7),e(12,"mat-error",8),n(13,"El campo es requerido"),r()()(),e(14,"div",5)(15,"mat-form-field",6)(16,"mat-label"),n(17,"Enter your password"),r(),d(18,"input",9),e(19,"button",10),v("click",function(){return m.togglePassword()}),e(20,"mat-icon"),n(21),r()(),e(22,"mat-error",8),n(23,"El campo es requerido"),r()()(),e(24,"button",11),n(25," Iniciar sesi\xF3n "),r()()()()),i&2&&(p(6),g("formGroup",m.loginForm),p(12),g("type",m.passwordType),p(3),M(m.hideIcon))},dependencies:[G,k,B,D,q,O,_,j,A,w,x,E,N,J,P,V,H,K,Q,R]})};var Y=[{path:"login",component:c},{path:"**",redirectTo:"login"}],f=class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=l({type:o});static \u0275inj=s({imports:[h.forChild(Y),h]})};var X=class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=l({type:o});static \u0275inj=s({imports:[C,f,U]})};export{X as AuthModule};
