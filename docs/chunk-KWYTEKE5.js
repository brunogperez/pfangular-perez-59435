import{a as P,b as T}from"./chunk-CK25IJLO.js";import{a as m,b as x,c as I}from"./chunk-A7RA4PBA.js";import{a as b,d as i,e as F,f as E,p as A,q as L,r as R,v as n,w as U}from"./chunk-HNE7D7Y7.js";import{b as y}from"./chunk-4SWAUFVP.js";import{J as f,K as g,R as M,a as o,b as c,da as B,e as G,la as $,qa as h,s as C,x as d,z as v}from"./chunk-PWY5XFB5.js";var u=F({source:"Student",events:{"Load Students":E(),"Load Students Success":i(),"Load Students Failure":i(),"Create Student":i(),"Create Student Success":i(),"Create Student Failure":i(),"Update Student":i(),"Update Student Success":i(),"Update Student Failure":i(),"Delete Student":i(),"Delete Student Success":i(),"Delete Student Failure":i(),"Search Students":i(),"Search Students Success":i(),"Search Students Failure":i()}});var z="student",rt={students:[]},st=U(rt,n(u.loadStudents,t=>o({},t)),n(u.loadStudentsSuccess,(t,e)=>c(o({},t),{students:e.data})),n(u.loadStudentsFailure,(t,e)=>c(o({},t),{error:e})),n(u.createStudentSuccess,(t,{student:e})=>c(o({},t),{students:[...t.students,e]})),n(u.createStudentFailure,(t,{error:e})=>c(o({},t),{error:e})),n(u.updateStudent,t=>o({},t)),n(u.updateStudentSuccess,(t,{student:e})=>c(o({},t),{students:t.students.map(s=>s.id===e.id?e:s)})),n(u.updateStudentFailure,(t,{error:e})=>c(o({},t),{error:e})),n(u.deleteStudent,(t,{id:e})=>c(o({},t),{students:t.students.filter(s=>s.id!==e)})),n(u.searchStudents,t=>o({},t)),n(u.searchStudentsSuccess,(t,{students:e})=>c(o({},t),{students:e})),n(u.searchStudentsFailure,(t,{error:e})=>o({},t))),ht=R({name:z,reducer:st});var a=F({source:"Course",events:{"Load Courses":E(),"Load Courses Success":i(),"Load Courses Failure":i(),"Load Course By Id":i(),"Load Course By Id Success":i(),"Load Course By Id Failure":i(),"Create Course":i(),"Create Course Success":i(),"Create Course Failure":i(),"Update Course":i(),"Update Course Success":i(),"Update Course Failure":i(),"Delete Course":i(),"Delete Course Success":i(),"Delete Course Failure":i()}});var q="course",ot={course:{},courses:[],loadCourseError:null},nt=U(ot,n(a.loadCourses,t=>o({},t)),n(a.loadCoursesSuccess,(t,e)=>c(o({},t),{courses:e.data})),n(a.loadCoursesFailure,(t,e)=>c(o({},t),{loadCourseError:e.error})),n(a.loadCourseById,t=>o({},t)),n(a.loadCourseByIdSuccess,(t,{data:e})=>c(o({},t),{course:e})),n(a.loadCourseByIdFailure,(t,e)=>c(o({},t),{error:e})),n(a.createCourseSuccess,(t,{course:e})=>c(o({},t),{courses:[...t.courses,e]})),n(a.createCourseFailure,(t,{error:e})=>c(o({},t),{error:e})),n(a.updateCourse,t=>o({},t)),n(a.updateCourseSuccess,(t,{course:e})=>c(o({},t),{courses:t.courses.map(s=>s.id===e.id?e:s)})),n(a.updateCourseFailure,(t,{error:e})=>c(o({},t),{error:e})),n(a.deleteCourse,(t,{id:e})=>c(o({},t),{courses:t.courses.filter(s=>s.id!==e)}))),yt=R({name:q,reducer:nt});var l=F({source:"Inscription",events:{"Load Inscriptions":E(),"Load Inscriptions Success":i(),"Load Inscriptions Failure":i(),"Load Inscriptions By Course":i(),"Load Inscriptions By Course Success":i(),"Load Inscriptions By Course Failure":i(),"Create Inscription":i(),"Create Inscription Success":i(),"Create Inscription Failure":i(),"Delete Inscription":i(),"Delete Inscription Success":i(),"Delete Inscription Failure":i()}});var J="inscription",ut={isLoadingInscription:!1,loadInscriptionError:null,inscriptions:[],selectedCourseId:null},at=U(ut,n(l.loadInscriptions,t=>c(o({},t),{isLodingInscription:!0})),n(l.loadInscriptionsSuccess,(t,e)=>c(o({},t),{inscriptions:e.data,isLodingInscription:!1,loadInscriptionError:null})),n(l.loadInscriptionsFailure,(t,e)=>c(o({},t),{loadInscriptionError:e.error,isLodingInscription:!1})),n(l.loadInscriptionsByCourse,t=>o({},t)),n(l.loadInscriptionsByCourseSuccess,(t,e)=>c(o({},t),{inscriptions:e.data})),n(l.loadInscriptionsByCourseFailure,(t,e)=>c(o({},t),{error:e})),n(l.createInscription,(t,e)=>c(o({},t),{inscriptions:[...t.inscriptions,{id:P(25),courseId:e.courseId,studentId:e.studentId}]})),n(l.deleteInscription,(t,e)=>c(o({},t),{inscriptions:t.inscriptions.filter(s=>s.studentId!==e.id)}))),Ot=R({name:J,reducer:at});var w=G(T());var k=class t{constructor(e){this.httpClient=e}apiBaseURL=b.apiBaseURL;createStudent(e){return this.httpClient.post(`${this.apiBaseURL}/students`,c(o({},e),{createdAt:new Date().toISOString()}))}getStudents(){return this.httpClient.get(`${this.apiBaseURL}/students`)}getStudentById(e){return this.httpClient.get(`${this.apiBaseURL}/students/${e}?_embed=inscriptions`)}searchStudents(e){let s=`${this.apiBaseURL}/students?firstName=${e}`;return this.httpClient.get(s).pipe(d(p=>p))}updateStudentById(e,s){return this.httpClient.patch(`${this.apiBaseURL}/students/${e}`,s).pipe(g(()=>this.getStudents()))}removeStudentById(e){return this.httpClient.delete(`${this.apiBaseURL}/students/${e}`).pipe(g(()=>this.getStudents()))}static \u0275fac=function(s){return new(s||t)(h(y))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};var O=class t{constructor(e){this.httpClient=e}apiBaseURL=b.apiBaseURL;getInscriptions(){return this.httpClient.get(`${this.apiBaseURL}/inscriptions`)}getInscriptionsById(e){let s=`${this.apiBaseURL}/inscriptions?studentId=${e}`;return this.httpClient.get(s).pipe(d(p=>p))}getInscriptionsByCourse(e){let s=`${this.apiBaseURL}/inscriptions?courseId=${e}`;return this.httpClient.get(s).pipe(d(p=>p))}getInscriptionsByCourseAndStudent(e,s){let p=`${this.apiBaseURL}/inscriptions?studentId=${s}&courseId=${e}`;return this.httpClient.get(p).pipe(d(r=>r))}createInscription(e){return this.httpClient.post(`${this.apiBaseURL}/inscriptions`,c(o({},e),{id:P(8)}))}deleteInscription(e){return this.httpClient.delete(`${this.apiBaseURL}/inscriptions/${e}`).pipe(g(()=>this.getInscriptions()))}searchStudents(e){let s=`${this.apiBaseURL}/students?name=${e}`;return this.httpClient.get(s).pipe(d(p=>p.filter(r=>r.firstName.toLowerCase().includes(e.toLowerCase()))))}isStudentEnrolled(e,s){return this.httpClient.get(`${this.apiBaseURL}/inscriptions?studentId=${e}&courseId=${s}`).pipe(d(p=>p.length>0))}static \u0275fac=function(s){return new(s||t)(h(y))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};var X=class t{constructor(e,s,p){this.actions$=e;this.studentsService=s;this.inscriptionsService=p;this.loadStudents$=m(()=>this.actions$.pipe(I(u.loadStudents),g(r=>this.studentsService.getStudents().pipe(d(S=>u.loadStudentsSuccess({data:S})),f(S=>C(u.loadStudentsFailure({error:S}))))))),this.loadStudentsAfterUpdate$=m(()=>this.actions$.pipe(I(u.updateStudentSuccess),d(()=>u.loadStudents()))),this.createStudents$=m(()=>this.actions$.pipe(I(u.createStudent),v(({student:r})=>this.studentsService.createStudent(r).pipe(d(S=>u.createStudentSuccess({student:S})),f(S=>(w.default.fire("Error","No se pudo crear el curso.","error"),C(u.createStudentFailure({error:S})))))))),this.updateStudents$=m(()=>this.actions$.pipe(I(u.updateStudent),M(),v(({id:r,update:S})=>this.studentsService.updateStudentById(r,S).pipe(d(j=>{let et=j[0];return u.updateStudentSuccess({student:et})}),f(j=>(w.default.fire("Error","No se pudo actualizar el alumno.","error"),C(u.updateStudentFailure({error:j})))))))),this.deleteStudents$=m(()=>this.actions$.pipe(I(u.deleteStudent),B(({id:r})=>this.studentsService.removeStudentById(r).pipe(d(S=>(w.default.fire("\xA1Eliminado!","El alumno ha sido eliminado.","success"),u.deleteStudentSuccess({data:S}))),f(S=>(w.default.fire("Error","Hubo un problema al eliminar el alumno.","error"),C(u.deleteStudentFailure({error:S})))))))),this.searchStudents$=m(()=>this.actions$.pipe(I(u.searchStudents),v(({term:r})=>(r?this.inscriptionsService.searchStudents(r):this.studentsService.getStudents()).pipe(d(S=>u.searchStudentsSuccess({students:S})),f(S=>C(u.searchStudentsFailure({error:S})))))))}loadStudents$;loadStudentsAfterUpdate$;createStudents$;updateStudents$;deleteStudents$;searchStudents$;static \u0275fac=function(s){return new(s||t)(h(x),h(k),h(O))};static \u0275prov=$({token:t,factory:t.\u0275fac})};var Q=G(T());var Z=class t{constructor(e,s){this.actions$=e;this.inscriptionService=s;this.loadInscriptions$=m(()=>this.actions$.pipe(I(l.loadInscriptions),g(p=>this.inscriptionService.getInscriptions().pipe(d(r=>l.loadInscriptionsSuccess({data:r})),f(r=>C(l.loadInscriptionsFailure({error:r}))))))),this.loadInscriptionsByCourse$=m(()=>this.actions$.pipe(I(l.loadInscriptionsByCourse),v(p=>this.inscriptionService.getInscriptionsByCourse(p.courseId).pipe(d(r=>l.loadInscriptionsByCourseSuccess({data:r})),f(r=>C(l.loadInscriptionsByCourseFailure({error:r}))))))),this.createInscription$=m(()=>this.actions$.pipe(I(l.createInscription),g(p=>this.inscriptionService.createInscription({studentId:p.studentId,courseId:p.courseId}).pipe(d(r=>l.createInscriptionSuccess({data:r})),f(r=>C(l.createInscriptionFailure({error:r}))))))),this.createInscriptionSuccess$=m(()=>this.actions$.pipe(I(l.createInscriptionSuccess),d(()=>l.loadInscriptions()))),this.deleteInscription$=m(()=>this.actions$.pipe(I(l.deleteInscription),B(({id:p})=>this.inscriptionService.deleteInscription(p).pipe(d(r=>(Q.default.fire("\xA1Eliminado!","La inscripci\xF3n ha sido eliminada.","success"),l.deleteInscriptionSuccess({data:r}))),f(r=>(Q.default.fire("Error","Hubo un problema al eliminar la inscripci\xF3n.","error"),C(l.deleteInscriptionFailure({error:r})))))),B(()=>C(l.loadInscriptions())))),this.loadInscriptionsAfterDelete$=m(()=>this.actions$.pipe(I(l.deleteInscriptionSuccess),d(()=>l.loadInscriptions())))}loadInscriptions$;createInscription$;createInscriptionSuccess$;loadInscriptionsByCourse$;deleteInscription$;loadInscriptionsAfterDelete$;static \u0275fac=function(s){return new(s||t)(h(x),h(O))};static \u0275prov=$({token:t,factory:t.\u0275fac})};var D=G(T());var K=class t{constructor(e){this.httpClient=e}apiBaseURL=b.apiBaseURL;createCourse(e){return this.httpClient.post(`${this.apiBaseURL}/courses`,e)}getCourses(){return this.httpClient.get(`${this.apiBaseURL}/courses`)}getCourseById(e){return this.httpClient.get(`${this.apiBaseURL}/courses/${e}`)}updateCourseById(e,s){return this.httpClient.patch(`${this.apiBaseURL}/courses/${e}`,s).pipe(g(()=>this.getCourses()))}removeCourseById(e){return this.httpClient.delete(`${this.apiBaseURL}/courses/${e}`).pipe(g(()=>this.getCourses()))}static \u0275fac=function(s){return new(s||t)(h(y))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};var _=class t{constructor(e,s){this.actions$=e;this.coursesService=s;this.loadCourses$=m(()=>this.actions$.pipe(I(a.loadCourses),g(p=>this.coursesService.getCourses().pipe(d(r=>a.loadCoursesSuccess({data:r})),f(r=>C(a.loadCoursesFailure({error:r}))))))),this.loadCourseById$=m(()=>this.actions$.pipe(I(a.loadCourseById),v(({id:p})=>this.coursesService.getCourseById(p).pipe(d(r=>a.loadCourseByIdSuccess({data:r})),f(r=>C(a.loadCourseByIdFailure({error:r}))))))),this.loadCoursesAfterUpdate$=m(()=>this.actions$.pipe(I(a.updateCourseSuccess),d(()=>a.loadCourses()))),this.createCourses$=m(()=>this.actions$.pipe(I(a.createCourse),v(({course:p})=>this.coursesService.createCourse(p).pipe(d(r=>a.createCourseSuccess({course:r})),f(r=>(D.default.fire("Error","No se pudo crear el curso.","error"),C(a.createCourseFailure({error:r})))))))),this.updateCourses$=m(()=>this.actions$.pipe(I(a.updateCourse),M(),v(({id:p,update:r})=>this.coursesService.updateCourseById(p,r).pipe(d(S=>{let j=S[0];return a.updateCourseSuccess({course:j})}),f(S=>(D.default.fire("Error","No se pudo actualizar el curso.","error"),C(a.updateCourseFailure({error:S})))))))),this.deleteCourses$=m(()=>this.actions$.pipe(I(a.deleteCourse),B(({id:p})=>this.coursesService.removeCourseById(p).pipe(d(r=>(D.default.fire("\xA1Eliminado!","El curso ha sido eliminado.","success"),a.deleteCourseSuccess({data:r}))),f(r=>(D.default.fire("Error","Hubo un problema al eliminar el curso.","error"),C(a.deleteCourseFailure({error:r}))))))))}loadCourses$;loadCourseById$;loadCoursesAfterUpdate$;deleteCourses$;updateCourses$;createCourses$;static \u0275fac=function(s){return new(s||t)(h(x),h(K))};static \u0275prov=$({token:t,factory:t.\u0275fac})};var St=L(z),de=A(St,t=>t.students);var tt=L(q),me=A(tt,t=>t.courses),Ie=A(tt,t=>t.course);var N=L(J),he=A(N,t=>t.inscriptions),ge=A(N,t=>t.inscriptions),$e=A(N,t=>t.loadInscriptionError),ve=A(N,t=>t.isLoadingInscription);export{u as a,ht as b,de as c,l as d,a as e,yt as f,me as g,Ie as h,Ot as i,he as j,O as k,X as l,Z as m,_ as n};
